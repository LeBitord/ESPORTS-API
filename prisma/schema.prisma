generator client {
  provider        = "prisma-client-js"
}

datasource db {
  provider = "libsql"
}

model Player {
  id      Int    @id @default(autoincrement())
  name    String
  role    String?
  teamId  Int?
  team    Team? @relation(fields: [teamId], references: [id])
}

model Team {
  id        Int       @id @default(autoincrement())
  name      String
  players   Player[]
  createdAt DateTime  @default(now())

  matchesA  Match[]   @relation("TeamA")
  matchesB  Match[]   @relation("TeamB")
}

model Tournament {
  id        Int       @id @default(autoincrement())
  name      String
  location  String?
  startDate DateTime?
  endDate   DateTime?
  matches   Match[]
}

model Match {
  id            Int         @id @default(autoincrement())
  date          DateTime?
  teamAId       Int
  teamBId       Int
  scoreA        Int?        @default(0)
  scoreB        Int?        @default(0)
  tournamentId  Int

  teamA         Team        @relation("TeamA", fields: [teamAId], references: [id])
  teamB         Team        @relation("TeamB", fields: [teamBId], references: [id])
  tournament    Tournament  @relation(fields: [tournamentId], references: [id])
}
model User {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  password  String
  role      UserRole  @default(PLAYER)
  createdAt DateTime  @default(now())
}

enum UserRole {
  ADMIN
  ORGANIZER
  PLAYER
}
